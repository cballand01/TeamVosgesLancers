<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Plans d’entraînement — Athlètes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0f172a; --card:#111827; --surface:#0b1326;
      --text:#e5e7eb; --muted:#94a3b8; --line:#1f2937; --accent:#22c55e;
      --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial}
    .wrap{max-width:1000px;margin:0 auto;padding:24px 16px 96px}

    /* Header */
    .back{display:inline-flex;align-items:center;gap:6px;color:var(--text);text-decoration:none;font-size:16px;margin-bottom:12px}
    .back svg{width:20px;height:20px;stroke:#fff}
    h1{margin:0 0 6px;font-size:28px;line-height:1.15;font-weight:800;letter-spacing:.2px;position:relative;padding-bottom:8px}
    h1::after{content:"";position:absolute;left:0;bottom:0;width:88px;height:3px;background:var(--accent);border-radius:999px;
      box-shadow:0 0 0 1px rgba(34,197,94,.15), 0 8px 18px rgba(34,197,94,.18)}
    .subtitle{opacity:.85;color:var(--muted);margin-bottom:16px}

    /* ====== ATHLÈTES (mobile: liste verticale) ====== */
    .ath-list{display:grid;gap:10px}
    a.ath-card{
      position:relative;display:flex;gap:12px;align-items:center;
      padding:12px 14px;background:var(--card);border:1px solid var(--line);border-radius:16px;
      text-decoration:none;color:var(--text);
    }
    a.ath-card::before{content:"";position:absolute;left:0;top:0;bottom:0;width:6px;background:var(--accent);border-radius:16px 0 0 16px;opacity:.9}
    .ath-avatar{width:72px;height:72px;border-radius:12px;overflow:hidden;border:1px solid #334155;background:#000;flex:0 0 72px}
    .ath-avatar img{width:100%;height:100%;object-fit:cover}
    .ath-txt{min-width:0;display:flex;flex-direction:column;gap:4px}
    .ath-name{font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .ath-meta{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .ath-chevron{margin-left:auto;color:#cbd5e1;font-size:20px;opacity:.85}

    /* ====== Exercices (mobile: liste) ====== */
    .section-title{margin:30px 0 8px;font-weight:700}
    .section-line{height:1px;background:#243043;border:none;margin:0 0 14px;opacity:.6}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .search{flex:1;min-width:180px;background:#0b1326;border:1px solid var(--line);border-radius:10px;color:var(--text);padding:10px 12px}
    .pill{padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:#0b1326;color:var(--text);cursor:pointer;font-size:13px}
    .pill.active{background:var(--accent);color:#0b1326;border-color:var(--accent)}

    .ex-list{display:grid;gap:10px}
    .ex-row{
      display:flex;gap:10px;align-items:center;
      background:var(--card);border:1px solid var(--line);border-radius:12px;padding:10px 12px;
    }
    .ex-thumb{width:110px;height:62px;flex:0 0 110px;border-radius:10px;overflow:hidden;background:#000}
    .ex-thumb img{width:100%;height:100%;object-fit:cover}
    .ex-txt{min-width:0}
    .ex-title{font-weight:700;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .ex-info{font-size:12px;color:var(--muted)}
    .info-btn{margin-left:auto;border:1px solid var(--line);background:transparent;color:var(--text);border-radius:8px;padding:6px 10px;cursor:pointer}

    /* ====== Desktop adaptations ====== */
    @media (min-width:760px){
      .wrap{padding:24px 24px 96px}
      /* Athlètes → grille */
      .ath-list{grid-template-columns:repeat(3,1fr)}
      a.ath-card{flex-direction:row}
      .ath-avatar{width:64px;height:64px;flex:0 0 64px}

      /* Exos → cartes en grille */
      .ex-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
      .ex-row{display:block;padding:0;overflow:hidden}
      .ex-thumb{width:100%;height:auto;aspect-ratio:16/9;border-radius:12px 12px 0 0}
      .ex-thumb img{border-bottom:1px solid var(--line)}
      .ex-txt{padding:10px 12px}
      .info-btn{margin:8px 12px 12px auto;display:block}
    }

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;align-items:center;justify-content:center;z-index:1000;padding:16px}
    .lightbox.open{display:flex}
    .viewer{position:relative;width:min(100%,900px);max-height:90vh;background:#000;border-radius:12px;overflow:hidden}
    .viewer img{display:block;width:100%;height:auto}
    .viewer-head{position:absolute;top:8px;left:8px;right:8px;display:flex;justify-content:space-between;align-items:center}
    .viewer-title{color:#fff;font-size:14px;background:rgba(0,0,0,.5);padding:6px 10px;border-radius:8px}
    .close{background:rgba(255,255,255,.15);border:none;color:#fff;width:36px;height:36px;border-radius:8px;cursor:pointer}
  </style>
</head>
<body>
  <div class="wrap">
    <a href="index.html" class="back">
      <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/></svg>
      Retour
    </a>

    <h1>Plans d’entraînement</h1>
    <div class="subtitle">Choisis un athlète pour ouvrir son plan • Explore les exercices illustrés</div>

    <!-- Liste athlètes (mobile: 1 par ligne) -->
    <div id="athList" class="ath-list"></div>

    <div class="section-title">Exercices illustrés</div>
    <hr class="section-line" />

    <!-- Barre outils -->
    <div class="toolbar">
      <input id="q" class="search" placeholder="Recherche : squat, épaulé, frappes…">
      <button class="pill active" data-fam="all">Tous</button>
      <button class="pill" data-fam="muscu">Musculation</button>
      <button class="pill" data-fam="halter">Haltérophilie</button>
      <button class="pill" data-fam="spec">Spécifiques</button>
    </div>

    <!-- Liste / grille d’exos -->
    <div id="exList" class="ex-list"></div>
  </div>

  <!-- Lightbox -->
  <div id="lb" class="lightbox">
    <div class="viewer">
      <div class="viewer-head">
        <div id="lbTitle" class="viewer-title"></div>
        <button id="lbClose" class="close">✕</button>
      </div>
      <img id="lbImg" alt="">
    </div>
  </div>

  <script>
    const API = 'https://script.google.com/macros/s/YOUR-APPS-SCRIPT/exec'; // à remplacer

    // Données mock (remplace par fetch API plus tard)
    const ATHLETES = [
      { id:'charles', name:'Charles Balland', photo:'./images/Charles.png', club:'PCA • Sénior' },
      { id:'daniel',  name:'Daniel Balland',  photo:'./images/Daniel.png',  club:'AVEC • Légende' },
      { id:'elano',   name:'Elano Thiébaut',  photo:'./images/Elano.png',   club:'AVEC • Jeune' },
      { id:'fabio',   name:'Fabio Thiébaut',  photo:'./images/fabio.png',   club:'AVEC • Jeune' },
      { id:'fanny',   name:'Fanny T.-Lacôte', photo:'./images/fanny.png',   club:'AVEC • Sénior' },
      { id:'franck',  name:'Franck Mathieu',  photo:'./images/franck.jpg',  club:'AVEC • Master' },
      { id:'laura',   name:'Laura Didier',    photo:'./images/Laura.png',   club:'AVEC • Sénior' },
      { id:'maxime',  name:'Maxime Balland',  photo:'./images/maxime.jpg',  club:'MBA • Sénior' },
      { id:'rosie',   name:'Rosie Prêtre',    photo:'./images/Rosie.png',   club:'AVEC • Master' },
      { id:'yanis',   name:'Yanis Boulayoune',photo:'./images/Yanis.png',   club:'AVEC • Sénior' },
    ];

    const EXOS = [
      { id:'squat', fam:'muscu', name:'Squat arrière', thumb:'https://i.imgur.com/3r5kqjG.jpeg', note:'Quadriceps • Force' },
      { id:'bench', fam:'muscu', name:'Développé couché', thumb:'https://i.imgur.com/5b0q7hS.jpeg', note:'Pectoraux • Force' },
      { id:'dl',    fam:'muscu', name:'Soulevé de terre', thumb:'https://i.imgur.com/y1F7pF2.jpeg', note:'Chaîne postérieure' },
      { id:'sn',    fam:'halter',name:'Arraché', thumb:'https://i.imgur.com/0dXw0k2.jpeg', note:'Explosivité • Technique' },
      { id:'cj',    fam:'halter',name:'Épaulé-jeté', thumb:'https://i.imgur.com/8v9M3Kj.jpeg', note:'Puissance' },
      { id:'wall',  fam:'spec',  name:'Frappes au mur', thumb:'https://i.imgur.com/8YBf1bT.jpeg', note:'Spécifique disque' },
      { id:'step',  fam:'spec',  name:'Déplacements disques', thumb:'https://i.imgur.com/3YJXb7a.jpeg', note:'Pieds • rythme' },
    ];

    // ===== Athlètes (mobile: une carte = un lien cliquable) =====
    const athList = document.getElementById('athList');
    ATHLETES.forEach(a=>{
      const card = document.createElement('a');
      card.className = 'ath-card';
      card.href = `athlete.html?id=${encodeURIComponent(a.id)}`;
      card.innerHTML = `
        <div class="ath-avatar"><img src="${a.photo}" alt="${a.name}"></div>
        <div class="ath-txt">
          <div class="ath-name">${a.name}</div>
          <div class="ath-meta">${a.club||''}</div>
        </div>
        <div class="ath-chevron" aria-hidden="true">›</div>
      `;
      athList.appendChild(card);
    });

    // ===== Explorateur d’exos =====
    let fam = 'all';
    let q = '';
    const pills = document.querySelectorAll('.pill');
    const exList = document.getElementById('exList');
    const qInput = document.getElementById('q');

    pills.forEach(p=>{
      p.addEventListener('click', ()=>{
        pills.forEach(x=>x.classList.remove('active'));
        p.classList.add('active');
        fam = p.dataset.fam;
        renderExos();
      });
    });
    qInput.addEventListener('input', ()=>{ q = qInput.value.toLowerCase(); renderExos(); });

    function labelFam(f){ return f==='muscu'?'Musculation':f==='halter'?'Haltérophilie':'Spécifique'; }

    function renderExos(){
      exList.innerHTML = '';
      EXOS
        .filter(x=> fam==='all' ? true : x.fam===fam)
        .filter(x=> !q || x.name.toLowerCase().includes(q))
        .forEach(x=>{
          const row = document.createElement('div');
          row.className = 'ex-row';
          row.innerHTML = `
            <div class="ex-thumb"><img src="${x.thumb}" alt=""></div>
            <div class="ex-txt">
              <div class="ex-title">${x.name}</div>
              <div class="ex-info">${labelFam(x.fam)}${x.note ? ' • ' + x.note : ''}</div>
            </div>
            <button class="info-btn" data-id="${x.id}">i</button>
          `;
          row.querySelector('.info-btn').addEventListener('click', ()=>{
            openLB(x);
          });
          exList.appendChild(row);
        });
    }

    // Lightbox
    const lb = document.getElementById('lb');
    const lbImg = document.getElementById('lbImg');
    const lbTitle = document.getElementById('lbTitle');
    document.getElementById('lbClose').onclick = ()=> lb.classList.remove('open');
    lb.addEventListener('click', e=>{ if(e.target===lb) lb.classList.remove('open'); });
    function openLB(ex){
      lbImg.src = ex.thumb;
      lbTitle.textContent = `${ex.name} • ${labelFam(ex.fam)}${ex.note?' — '+ex.note:''}`;
      lb.classList.add('open');
    }

    renderExos();
  </script>
</body>
</html>
